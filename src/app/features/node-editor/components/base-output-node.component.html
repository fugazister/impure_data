<app-node-wrapper
  [node]="node"
  [width]="getWidth()"
  [height]="getHeight()"
  [backgroundColor]="getColor()"
  [isSelected]="isSelected"
  [isEditing]="isEditing"
  [isEditMode]="true"
  (nodeRightClick)="onNodeRightClick($event)"
  (portMouseDown)="onPortMouseDown($event.event, $event.portId, $event.portType)"
  (portMouseUp)="onPortMouseUp($event.event, $event.portId, $event.portType)"
>
  <!-- Header area for moving -->
  <rect
    class="node-header"
    [attr.width]="getWidth()"
    height="30"
    rx="4"
    ry="4"
    (mousedown)="onHeaderMouseDown($event)"
  />
  
  <!-- Node title -->
  <text
    class="node-title"
    x="8"
    y="20"
  >
    {{ getDisplayName() }}
  </text>
  
  <!-- Execute button -->
  <circle
    class="execute-button"
    [attr.cx]="getWidth() - 20"
    cy="15"
    r="8"
    fill="#4CAF50"
    stroke="#333"
    stroke-width="1"
    (click)="onExecuteClick($event)"
  />
  <text
    class="execute-text"
    [attr.x]="getWidth() - 20"
    y="19"
    text-anchor="middle"
    font-size="10"
    fill="white"
    pointer-events="none"
  >
    â–¶
  </text>

  <!-- Input value display -->
  <text
    class="input-value"
    x="8"
    y="45"
    font-size="11"
    fill="#333"
  >
    Input: {{ getInputValue() }}
  </text>

  <!-- Output display area -->
  <rect
    class="output-display"
    x="4"
    [attr.y]="getHeight() - 25"
    [attr.width]="getWidth() - 8"
    height="20"
    rx="2"
    ry="2"
    fill="#f5f5f5"
    stroke="#ddd"
    stroke-width="1"
  />
  
  <text
    class="output-text"
    x="8"
    [attr.y]="getHeight() - 10"
    font-size="10"
    fill="#666"
    font-family="monospace"
  >
    {{ getOutputValue() }}
  </text>
</app-node-wrapper>